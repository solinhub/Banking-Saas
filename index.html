<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banking SaaS Financial Projections</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #3498db, #8e44ad);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        .pricing-summary {
            background: linear-gradient(135deg, #e8f5e8, #d4edda);
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 15px;
            border: 2px solid #28a745;
        }
        .tier-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
        }
        .tier-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #28a745;
        }
        .control-group {
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        input, select {
            padding: 10px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
        }
        .currency-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .toggle-btn {
            padding: 10px 20px;
            border: none;
            background: #ecf0f1;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .toggle-btn.active {
            background: #3498db;
            color: white;
        }
        .toggle-btn:first-child {
            border-radius: 25px 0 0 25px;
        }
        .toggle-btn:last-child {
            border-radius: 0 25px 25px 0;
        }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transform: translateY(0);
            transition: transform 0.3s ease;
        }
        .metric-card:hover {
            transform: translateY(-5px);
        }
        .metric-value {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .metric-label {
            font-size: 1.1em;
            opacity: 0.9;
        }
        .projections-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #ecf0f1;
        }
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        tr:hover {
            background: #e8f4f8;
        }
        .positive {
            color: #27ae60;
            font-weight: 600;
        }
        .negative {
            color: #e74c3c;
            font-weight: 600;
        }
        .assumptions {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
        }
        .assumptions h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .assumptions ul {
            margin: 0;
            padding-left: 20px;
        }
        .assumptions li {
            margin-bottom: 8px;
            color: #34495e;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Banking SaaS Financial Projections</h1>
        
        <div class="controls">
            <div class="control-group">
                <label>Base Daily Transactions (Bank 1)</label>
                <input type="number" id="baseTxns" value="100000" min="1000">
            </div>
            <div class="control-group">
                <label>Annual Volume Growth (%)</label>
                <input type="number" id="growthRate" value="20" min="0" max="100">
            </div>
            <div class="control-group">
                <label>Tier 1 Max Volume (txns/day)</label>
                <input type="number" id="tier1Max" value="50000" min="1000">
            </div>
            <div class="control-group">
                <label>Tier 1 Price (â‚¦ per txn)</label>
                <input type="number" id="tier1Price" value="15" min="0" step="0.1">
            </div>
            <div class="control-group">
                <label>Tier 2 Max Volume (txns/day)</label>
                <input type="number" id="tier2Max" value="100000" min="50001">
            </div>
            <div class="control-group">
                <label>Tier 2 Price (â‚¦ per txn)</label>
                <input type="number" id="tier2Price" value="10" min="0" step="0.1">
            </div>
            <div class="control-group">
                <label>Tier 3 Price (â‚¦ per txn)</label>
                <input type="number" id="tier3Price" value="5" min="0" step="0.1">
            </div>
            <div class="control-group">
                <label>Implementation Fee (USD)</label>
                <input type="number" id="implFee" value="20000" min="0">
            </div>
            <div class="control-group">
                <label>Exchange Rate (NGN/USD)</label>
                <input type="number" id="exchRate" value="1600" min="100">
            </div>
            <div class="control-group">
                <label>Monthly Staff Cost (USD)</label>
                <input type="number" id="staffCost" value="2000" min="0">
            </div>
            <div class="control-group">
                <label>Revenue Share - Pinn (%)</label>
                <input type="number" id="revenueShare" value="60" min="0" max="100">
            </div>
        </div>

        <div class="pricing-summary">
            <h3 style="text-align: center; color: #2c3e50; margin-bottom: 15px;">ðŸ“Š Current Pricing Structure</h3>
            <div class="tier-display">
                <div class="tier-item">
                    <strong>Tier 1:</strong> 0 - <span id="displayTier1Max">50,000</span> txns/day = <strong>â‚¦<span id="displayTier1Price">15</span></strong> per txn
                </div>
                <div class="tier-item">
                    <strong>Tier 2:</strong> <span id="displayTier2Min">50,001</span> - <span id="displayTier2Max">100,000</span> txns/day = <strong>â‚¦<span id="displayTier2Price">10</span></strong> per txn
                </div>
                <div class="tier-item">
                    <strong>Tier 3:</strong> <span id="displayTier3Min">100,001</span>+ txns/day = <strong>â‚¦<span id="displayTier3Price">5</span></strong> per txn
                </div>
            </div>
        </div>

        <div class="currency-toggle">
            <button class="toggle-btn active" onclick="setCurrency('NGN')">Nigerian Naira (â‚¦)</button>
            <button class="toggle-btn" onclick="setCurrency('USD')">US Dollars ($)</button>
        </div>

        <div class="dashboard">
            <div class="metric-card">
                <div class="metric-value" id="totalRevenue">â‚¦0</div>
                <div class="metric-label">Total Revenue (3 Years)</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="pinnShare">â‚¦0</div>
                <div class="metric-label">Pinn's Share (3 Years)</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="netProfit">â‚¦0</div>
                <div class="metric-label">Net Profit (3 Years)</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="breakeven">Month 0</div>
                <div class="metric-label">Break-even Point</div>
            </div>
        </div>

        <div class="projections-table">
            <table>
                <thead>
                    <tr>
                        <th>Period</th>
                        <th>Banks</th>
                        <th>Processes</th>
                        <th>Daily Txns</th>
                        <th>Transaction Revenue</th>
                        <th>Implementation Fees</th>
                        <th>Total Revenue</th>
                        <th>Pinn's Share</th>
                        <th>Costs</th>
                        <th>Net Profit</th>
                        <th>Cumulative Profit</th>
                    </tr>
                </thead>
                <tbody id="projectionsBody">
                </tbody>
            </table>
        </div>

        <div class="assumptions">
            <h3>Key Assumptions</h3>
            <ul>
                <li><strong>Pricing Tiers:</strong> Fully customizable - adjust transaction volume ranges and prices above</li>
                <li><strong>Year 1:</strong> 1 bank, 1 process, 100k daily transactions</li>
                <li><strong>Year 2:</strong> Original bank adds 1 more process + 2 new banks (1 large: 150k txns/1 process, 1 small: 50k txns/1 process)</li>
                <li><strong>Year 3:</strong> All banks continue with 20% volume growth (conservative approach - no new processes)</li>
                <li><strong>Infrastructure Cost:</strong> â‚¦8.4M annually (from cloud hosting quote)</li>
                <li><strong>Revenue Split:</strong> 60% Pinn Business Network, 40% CashLink Global</li>
                <li><strong>Implementation:</strong> $20,000 per reconciliation process setup</li>
            </ul>
        </div>
    </div>

    <script>
        let currentCurrency = 'NGN';
        
        function setCurrency(currency) {
            currentCurrency = currency;
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            calculateProjections();
        }

        function formatCurrency(amount, currency = currentCurrency) {
            const absAmount = Math.abs(amount);
            const sign = amount < 0 ? '-' : '';
            
            if (currency === 'NGN') {
                if (absAmount >= 1000000000) {
                    return sign + 'â‚¦' + (absAmount / 1000000000).toFixed(1) + 'B';
                } else if (absAmount >= 1000000) {
                    return sign + 'â‚¦' + (absAmount / 1000000).toFixed(1) + 'M';
                } else if (absAmount >= 1000) {
                    return sign + 'â‚¦' + (absAmount / 1000).toFixed(0) + 'k';
                } else {
                    return sign + 'â‚¦' + absAmount.toLocaleString();
                }
            } else {
                if (absAmount >= 1000000) {
                    return sign + '$' + (absAmount / 1000000).toFixed(1) + 'M';
                } else if (absAmount >= 1000) {
                    return sign + '$' + (absAmount / 1000).toFixed(0) + 'k';
                } else {
                    return sign + '$' + absAmount.toLocaleString();
                }
            }
        }

        function getTierPrice(dailyTxns) {
            const tier1Max = parseInt(document.getElementById('tier1Max').value);
            const tier2Max = parseInt(document.getElementById('tier2Max').value);
            const tier1Price = parseFloat(document.getElementById('tier1Price').value);
            const tier2Price = parseFloat(document.getElementById('tier2Price').value);
            const tier3Price = parseFloat(document.getElementById('tier3Price').value);

            if (dailyTxns <= tier1Max) return tier1Price;
            if (dailyTxns <= tier2Max) return tier2Price;
            return tier3Price;
        }

        function updateTierLabels() {
            const tier1Max = parseInt(document.getElementById('tier1Max').value);
            const tier2Max = parseInt(document.getElementById('tier2Max').value);
            const tier1Price = parseFloat(document.getElementById('tier1Price').value);
            const tier2Price = parseFloat(document.getElementById('tier2Price').value);
            const tier3Price = parseFloat(document.getElementById('tier3Price').value);
            
            // Update pricing summary display
            document.getElementById('displayTier1Max').textContent = tier1Max.toLocaleString();
            document.getElementById('displayTier2Min').textContent = (tier1Max + 1).toLocaleString();
            document.getElementById('displayTier2Max').textContent = tier2Max.toLocaleString();
            document.getElementById('displayTier3Min').textContent = (tier2Max + 1).toLocaleString();
            document.getElementById('displayTier1Price').textContent = tier1Price.toFixed(1);
            document.getElementById('displayTier2Price').textContent = tier2Price.toFixed(1);
            document.getElementById('displayTier3Price').textContent = tier3Price.toFixed(1);
        }

        function calculateProjections() {
            const baseTxns = parseInt(document.getElementById('baseTxns').value);
            const growthRate = parseFloat(document.getElementById('growthRate').value) / 100;
            const implFee = parseInt(document.getElementById('implFee').value);
            const exchRate = parseFloat(document.getElementById('exchRate').value);
            const staffCostUSD = parseInt(document.getElementById('staffCost').value);
            const revenueSharePinn = parseFloat(document.getElementById('revenueShare').value) / 100;

            const infraCostNGN = 8432656.29;
            const staffCostNGN = staffCostUSD * exchRate;
            const implFeeNGN = implFee * exchRate;

            let projections = [];
            let totalRevenue = 0;
            let totalPinnShare = 0;
            let cumulativeProfit = 0;
            let breakEvenMonth = 0;

            // Year 1 - 1 bank, 1 process
            for (let month = 1; month <= 12; month++) {
                const yearProgress = (month - 1) / 12;
                const dailyTxns = Math.floor(baseTxns * (1 + growthRate * yearProgress));
                const monthlyTxns = dailyTxns * 30;
                const pricePerTxn = getTierPrice(dailyTxns);
                const txnRevenue = monthlyTxns * pricePerTxn;
                const implRevenue = month === 1 ? implFeeNGN : 0;
                const totalMonthRevenue = txnRevenue + implRevenue;
                const pinnRevenue = totalMonthRevenue * revenueSharePinn;
                const costs = (infraCostNGN / 12) + staffCostNGN;
                const netProfit = pinnRevenue - costs;
                cumulativeProfit += netProfit;

                if (cumulativeProfit > 0 && breakEvenMonth === 0) {
                    breakEvenMonth = month;
                }

                projections.push({
                    period: `Year 1 M${month}`,
                    banks: 1,
                    processes: 1,
                    dailyTxns: dailyTxns,
                    txnRevenue: txnRevenue,
                    implRevenue: implRevenue,
                    totalRevenue: totalMonthRevenue,
                    pinnShare: pinnRevenue,
                    costs: costs,
                    netProfit: netProfit,
                    cumulativeProfit: cumulativeProfit
                });

                totalRevenue += totalMonthRevenue;
                totalPinnShare += pinnRevenue;
            }

            // Year 2 - Original bank adds 1 process + 2 new banks
            for (let month = 13; month <= 24; month++) {
                const yearProgress = (month - 13) / 12;
                
                // Bank 1: 2 processes, grown volume
                const bank1Txns = Math.floor(baseTxns * (1 + growthRate) * (1 + growthRate * yearProgress));
                const bank1MonthlyTxns = bank1Txns * 30 * 2; // 2 processes
                const bank1Price = getTierPrice(bank1Txns);
                const bank1Revenue = bank1MonthlyTxns * bank1Price;

                // Bank 2: Large bank, 1 process, 150k base (UPDATED)
                const bank2Txns = Math.floor(150000 * (1 + growthRate * yearProgress));
                const bank2MonthlyTxns = bank2Txns * 30 * 1; // 1 process only
                const bank2Price = getTierPrice(bank2Txns);
                const bank2Revenue = bank2MonthlyTxns * bank2Price;

                // Bank 3: Small bank, 1 process, 50k base (UPDATED)
                const bank3Txns = Math.floor(50000 * (1 + growthRate * yearProgress));
                const bank3MonthlyTxns = bank3Txns * 30 * 1; // 1 process only
                const bank3Price = getTierPrice(bank3Txns);
                const bank3Revenue = bank3MonthlyTxns * bank3Price;

                const txnRevenue = bank1Revenue + bank2Revenue + bank3Revenue;
                
                // Implementation fees: Bank 1 adds 1 process (month 13), Bank 2&3 join with 1 process each (month 13)
                const implRevenue = month === 13 ? implFeeNGN * 3 : 0; // 1 + 1 + 1 = 3 processes (UPDATED)
                
                const totalMonthRevenue = txnRevenue + implRevenue;
                const pinnRevenue = totalMonthRevenue * revenueSharePinn;
                const costs = (infraCostNGN / 12) + staffCostNGN;
                const netProfit = pinnRevenue - costs;
                cumulativeProfit += netProfit;

                if (cumulativeProfit > 0 && breakEvenMonth === 0) {
                    breakEvenMonth = month;
                }

                const totalDailyTxns = bank1Txns + bank2Txns + bank3Txns;

                projections.push({
                    period: `Year 2 M${month-12}`,
                    banks: 3,
                    processes: 4, // UPDATED: 2 + 1 + 1 = 4 total processes
                    dailyTxns: totalDailyTxns,
                    txnRevenue: txnRevenue,
                    implRevenue: implRevenue,
                    totalRevenue: totalMonthRevenue,
                    pinnShare: pinnRevenue,
                    costs: costs,
                    netProfit: netProfit,
                    cumulativeProfit: cumulativeProfit
                });

                totalRevenue += totalMonthRevenue;
                totalPinnShare += pinnRevenue;
            }

            // Year 3 - All continue with growth
            for (let month = 25; month <= 36; month++) {
                const yearProgress = (month - 25) / 12;
                
                // Bank 1: 2 processes
                const bank1Txns = Math.floor(baseTxns * Math.pow(1 + growthRate, 2) * (1 + growthRate * yearProgress));
                const bank1MonthlyTxns = bank1Txns * 30 * 2;
                const bank1Price = getTierPrice(bank1Txns);
                const bank1Revenue = bank1MonthlyTxns * bank1Price;

                // Bank 2: Large bank, 1 process (UPDATED)
                const bank2Txns = Math.floor(150000 * (1 + growthRate) * (1 + growthRate * yearProgress));
                const bank2MonthlyTxns = bank2Txns * 30 * 1; // 1 process only
                const bank2Price = getTierPrice(bank2Txns);
                const bank2Revenue = bank2MonthlyTxns * bank2Price;

                // Bank 3: Small bank, 1 process (UPDATED)
                const bank3Txns = Math.floor(50000 * (1 + growthRate) * (1 + growthRate * yearProgress));
                const bank3MonthlyTxns = bank3Txns * 30 * 1; // 1 process only
                const bank3Price = getTierPrice(bank3Txns);
                const bank3Revenue = bank3MonthlyTxns * bank3Price;

                const txnRevenue = bank1Revenue + bank2Revenue + bank3Revenue;
                const totalMonthRevenue = txnRevenue; // No implementation fees in Year 3
                const pinnRevenue = totalMonthRevenue * revenueSharePinn;
                const costs = (infraCostNGN / 12) + staffCostNGN;
                const netProfit = pinnRevenue - costs;
                cumulativeProfit += netProfit;

                if (cumulativeProfit > 0 && breakEvenMonth === 0) {
                    breakEvenMonth = month;
                }

                const totalDailyTxns = bank1Txns + bank2Txns + bank3Txns;

                projections.push({
                    period: `Year 3 M${month-24}`,
                    banks: 3,
                    processes: 4, // UPDATED: 2 + 1 + 1 = 4 total processes
                    dailyTxns: totalDailyTxns,
                    txnRevenue: txnRevenue,
                    implRevenue: 0,
                    totalRevenue: totalMonthRevenue,
                    pinnShare: pinnRevenue,
                    costs: costs,
                    netProfit: netProfit,
                    cumulativeProfit: cumulativeProfit
                });

                totalRevenue += totalMonthRevenue;
                totalPinnShare += pinnRevenue;
            }

            // Update dashboard
            const totalCosts = projections.reduce((sum, p) => sum + p.costs, 0);
            const totalNetProfit = totalPinnShare - totalCosts;

            if (currentCurrency === 'USD') {
                document.getElementById('totalRevenue').textContent = formatCurrency(totalRevenue / exchRate, 'USD');
                document.getElementById('pinnShare').textContent = formatCurrency(totalPinnShare / exchRate, 'USD');
                document.getElementById('netProfit').textContent = formatCurrency(totalNetProfit / exchRate, 'USD');
            } else {
                document.getElementById('totalRevenue').textContent = formatCurrency(totalRevenue);
                document.getElementById('pinnShare').textContent = formatCurrency(totalPinnShare);
                document.getElementById('netProfit').textContent = formatCurrency(totalNetProfit);
            }

            document.getElementById('breakeven').textContent = breakEvenMonth > 0 ? `Month ${breakEvenMonth}` : 'Not Reached';

            // Update table
            const tbody = document.getElementById('projectionsBody');
            tbody.innerHTML = '';

            projections.forEach(proj => {
                const row = tbody.insertRow();
                const convertAmount = currentCurrency === 'USD' ? (amount) => amount / exchRate : (amount) => amount;
                
                row.innerHTML = `
                    <td>${proj.period}</td>
                    <td>${proj.banks}</td>
                    <td>${proj.processes}</td>
                    <td>${proj.dailyTxns.toLocaleString()}</td>
                    <td>${formatCurrency(convertAmount(proj.txnRevenue))}</td>
                    <td>${formatCurrency(convertAmount(proj.implRevenue))}</td>
                    <td>${formatCurrency(convertAmount(proj.totalRevenue))}</td>
                    <td>${formatCurrency(convertAmount(proj.pinnShare))}</td>
                    <td>${formatCurrency(convertAmount(proj.costs))}</td>
                    <td class="${proj.netProfit >= 0 ? 'positive' : 'negative'}">${formatCurrency(convertAmount(proj.netProfit))}</td>
                    <td class="${proj.cumulativeProfit >= 0 ? 'positive' : 'negative'}">${formatCurrency(convertAmount(proj.cumulativeProfit))}</td>
                `;
            });
        }

        // Add event listeners
        document.getElementById('baseTxns').addEventListener('input', calculateProjections);
        document.getElementById('growthRate').addEventListener('input', calculateProjections);
        document.getElementById('implFee').addEventListener('input', calculateProjections);
        document.getElementById('exchRate').addEventListener('input', calculateProjections);
        document.getElementById('staffCost').addEventListener('input', calculateProjections);
        document.getElementById('revenueShare').addEventListener('input', calculateProjections);
        
        // Add pricing tier event listeners with display updates
        document.getElementById('tier1Max').addEventListener('input', function() {
            updateTierLabels();
            calculateProjections();
        });
        document.getElementById('tier2Max').addEventListener('input', function() {
            updateTierLabels();
            calculateProjections();
        });
        document.getElementById('tier1Price').addEventListener('input', function() {
            updateTierLabels();
            calculateProjections();
        });
        document.getElementById('tier2Price').addEventListener('input', function() {
            updateTierLabels();
            calculateProjections();
        });
        document.getElementById('tier3Price').addEventListener('input', function() {
            updateTierLabels();
            calculateProjections();
        });

        // Initial setup
        updateTierLabels();
        calculateProjections();
    </script>
</body>
</html>
